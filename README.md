# GetContext GTM Template

[![License](https://img.shields.io/badge/license-MIT-blue.svg)](https://opensource.org/licenses/MIT)

A Google Tag Manager (GTM) template that injects a comprehensive set of contextual data into the `dataLayer` using the `context_ready` event. This template leverages the power of the [GetContext](https://getcontext.dev) project to enrich your analytics with meaningful context.

---

## Table of Contents

- [Features](#features)
- [Installation](#installation)
- [Usage](#usage)
- [Context Data Example](#context-data-example)
- [Contributing](#contributing)
- [License](#license)

---

## Features

- Automatically detects and injects contextual data into your GTM's `dataLayer`.
- Supports a wide range of contextual information, including:
  - Temporal details (date, time, year, month, etc.).
  - Device and browser properties (device type, memory, user agent, etc.).
  - User and environmental metrics (language, connection type, online status).
  - Performance indicators (load time, DOM readiness).
  - Special events and holidays.
- Seamless integration with GTM workflows.

---

## Installation

1. Clone the repository or download the GTM template from [GitHub](https://github.com/SamuelBreton/getcontext-gtm-template).
2. Import the `.tpl` file into your Google Tag Manager workspace:
   - Go to your GTM account and select the container you want to use.
   - Click on **Templates** in the left menu.
   - Choose **Import** and upload the `getcontext-gtm-template.tpl` file.

---

## Usage

1. Create a new **Custom Tag** in GTM.
2. Select the imported **GetContext Template** as the tag type.
3. Configure any additional parameters if necessary.
4. Publish your container to start injecting contextual data.

Once configured, the template will automatically push data into the `dataLayer` on page load under the `context_ready` event.

---

## Context Data Example

Below is an example of the `dataLayer.push()` output generated by the template:

```javascript
dataLayer.push({
  event: "context_ready",
  context: {
    date: "2024-12-24",
    time: "21:44:05",
    year: 2024,
    month: 12,
    day: 24,
    hour: 21,
    weekOfMonth: 4,
    dayOfWeek: "Tuesday",
    deviceType: "Desktop",
    referrer: "https://www.samuelbreton.com/",
    momentOfDay: "evening",
    season: "winter",
    isHoliday: "no",
    specialEvent: "none",
    colorScheme: "dark",
    deviceMemory: 8,
    performanceMetrics: {
      loadTime: 3852,
      domContentLoaded: 3765,
      firstPaint: 3409
    },
    language: "fr-FR",
    timezone: "Europe/Paris",
    screenResolution: "1920x1080",
    userAgent: "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36",
    pageTitle: "Google Tag Manager Sandbox - Samuel Breton",
    path: "/",
    url: "https://sandbox.samuelbreton.com/?gtm_debug=1735073039521",
    connectionType: "4g",
    downlink: 10,
    isOnline: true,
    weekOfYear: 52,
    quarter: 4,
    loadTime: 3852
  }
});
